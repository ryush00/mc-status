function renderPage(a){startUpdate(),$.each($("#mojang-status .alert"),function(a,b){$(b).html("Fetching status for <b>"+$(b).attr("data-name")+"</b>")}),updateMojangServices(),$("table td").tooltip(),chart=new CanvasJS.Chart("chart",a),doRender(chart),$(".nav li a").click(function(a){a.preventDefault(),$(this).tab("show");for(var b=0;b<chart.options.data.length;b++)chart.options.data[b].type=$(a.target).attr("data-name");doRender(chart)})}function doRender(a){a.render(),$(".canvasjs-chart-credit").remove()}var chart=null,updateIn=-1,startUpdate=function(){updateIn--<=0&&(updateIn=30);var a="Updating in "+updateIn+" second";0==updateIn?(a="Updating all data now",updateServers(),updateMojangServices()):1!=updateIn&&(a+="s"),$("h2 small").text(a),setTimeout(startUpdate,1e3)},updateServers=function(){$.getJSON("./api/servers",function(a){null!==chart&&$.each(a,function(a,b){$.each(chart.options.data,function(a,c){if(c.name===b.name){var d=[];$.each(b.pings,function(a,b){d.push({label:c.name,x:b.queryTime,y:b.players})}),c.dataPoints=d}})}),doRender(chart)})},updateMojangServices=function(){$.getJSON("./api/services",function(a){$.each($("#mojang-status .alert"),function(b,c){{var d,e=$(c).attr("data-service"),f=a[e],g=$(c).attr("data-name");f.bootstrapClass}switch(f.status){case"green":d="online";break;case"yellow":d="having problems";break;case"red":d="offline"}$(c).html(g+" is <b>"+d+"</b>"),$(c).removeClass(),$(c).addClass("alert"),$(c).addClass(f.bootstrapClass)})})};